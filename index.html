<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RetSOL GBA - Yellow Recharged</title>
    <style>
        body { background: #050505; color: #f8d030; font-family: 'Courier New', monospace; text-align: center; margin: 0; overflow: hidden; }
        #screen-container { width: 100vw; height: 60vh; background: #000; border-bottom: 2px solid #f8d030; box-shadow: 0 0 25px #f8d030; display: flex; align-items: center; justify-content: center; }
        canvas { width: 100%; height: auto; image-rendering: pixelated; }
        .menu { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 20px; }
        button { padding: 18px; border: 2px solid; font-weight: bold; background: rgba(0,0,0,0.8); color: inherit; font-size: 11px; text-transform: uppercase; cursor: pointer; }
        .btn-play { border-color: #f8d030; grid-column: span 2; box-shadow: 0 0 15px #f8d030; color: #f8d030; font-size: 14px; }
        .btn-hub { border-color: #00e0ff; color: #00e0ff; grid-column: span 2; margin-top: 10px; }
        #status { font-size: 10px; color: #ff3e81; margin-top: 10px; letter-spacing: 2px; font-weight: bold; height: 20px; }
    </style>
</head>
<body>

    <div id="screen-container"><canvas id="screen" width="240" height="160"></canvas></div>
    <div id="status">RETSOL GBA: READY TO BOOT</div>

    <div class="menu">
        <button class="btn-play" onclick="bootGame()">‚ö° START YELLOW RECHARGED ‚ö°</button>
        <button onclick="gba.pause()">‚è∏ PAUSE</button>
        <button onclick="gba.run()">‚ñ∂ RESUME</button>
        <button class="btn-hub" onclick="location.href='https://retsolgaming.github.io/RetSOL-Hub/'">üè† BACK TO HUB</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gbajs/1.0.0/gba.min.js"></script>
    <script>
        const gba = new GameBoyAdvance();
        gba.setCanvas(document.getElementById('screen'));

        function bootGame() {
            const status = document.getElementById('status');
            status.innerText = "LOCALIZING ROM BYTES...";
            
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') { audioCtx.resume(); }

            // This uses a relative path. GitHub allows this because it's the same website origin.
            const romPath = './yellowrecharged.gba';

            fetch(romPath)
                .then(response => {
                    if (!response.ok) throw new Error('NOT_FOUND_ON_SERVER');
                    return response.arrayBuffer();
                })
                .then(buffer => {
                    status.innerText = "INJECTING ENGINE...";
                    gba.loadRom(buffer, success => {
                        if(success) { 
                            gba.run(); 
                            status.innerText = "YELLOW RECHARGED ACTIVE";
                        } else {
                            status.innerText = "CRITICAL ENGINE ERROR";
                        }
                    });
                })
                .catch(err => {
                    status.innerText = "ERROR: FILE MISSING FROM DEPLOYMENT";
                    console.error(err);
                });
        }
    </script>
</body>
</html>
