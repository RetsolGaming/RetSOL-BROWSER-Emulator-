<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RetSOL GBA Lite</title>
    <style>
        body { background: #000; color: #fff; text-align: center; margin: 0; font-family: monospace; }
        #gfx { width: 100vw; height: auto; image-rendering: pixelated; }
        .menu { padding: 10px; }
        #status { color: #f8d030; font-size: 10px; margin-bottom: 10px; }
        button { background: #222; color: #f8d030; border: 1px solid #f8d030; padding: 15px; width: 90%; font-weight: bold; }
    </style>
</head>
<body>

    <canvas id="gfx" width="240" height="160"></canvas>
    <div id="status">RETSOL LITE ENGINE v9.0</div>

    <div class="menu">
        <button onclick="start()">⚡ LOAD YELLOW RECHARGED ⚡</button>
    </div>

    <script src="https://taisel.github.io/IodineGBA/IodineGBA/core/Cartridge.js"></script>
    <script src="https://taisel.github.io/IodineGBA/IodineGBA/core/IodineGBA.js"></script>

    <script>
        var gba = new IodineGBA();
        
        // Optimize for PSG1: Lower Audio buffer to save RAM
        gba.setAudioBufferSize(2048);

        function start() {
            const status = document.getElementById('status');
            status.innerText = "FETCHING BYTES...";

            // Direct fetch from your repo
            fetch('./yellowrecharged.gba')
                .then(res => res.arrayBuffer())
                .then(buffer => {
                    status.innerText = "BOOTING ENGINE...";
                    
                    // Direct buffer injection
                    const rom = new Uint8Array(buffer);
                    gba.attachCartridge(rom);
                    gba.play();
                    
                    status.innerText = "SYSTEM ACTIVE";
                })
                .catch(err => {
                    status.innerText = "MEMORY ERROR - REFRESH";
                    console.error(err);
                });
        }
    </script>
</body>
</html>
